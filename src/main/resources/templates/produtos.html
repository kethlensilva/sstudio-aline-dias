<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Produtos | Aline Dias Studio</title>
  <link rel="stylesheet" href="/css/produtos.css" />
</head>
<body>
  <header>
    <div class="logo">
      <img src="/images/logo.jpg" alt="Logo" />
    </div>
    <nav>
      <a href="/produtos" class="ativo">Produtos</a>
      <a href="/#">Lumera Hair</a>
      <a href="/produtos">Loiros</a>
    </nav>
    <div class="user-menu">
      <a href="/carrinho">Carrinho</a>
      <a href="/login">Login</a>
    </div>
  </header>

  <main>
    <section class="conteudo">
      <div class="intro">
        <div class="intro-texto">
          <h1>Linha Lumina Blond Hair</h1>
          <p>A linha Lumina Blond Hair realça a beleza dos cabelos loiros, neutralizando tons amarelados e proporcionando hidratação profunda. Com pigmentos matizadores, antioxidantes e filtro UV, protege contra danos e mantém os fios macios, saudáveis e iluminados.</p>
        </div>
        <div class="intro-imagem">
          <img src="/images/Lumina Blond.jpg" alt="Lumina Blond Hair" />
        </div>
      </div>

      <div class="produtos-grid">
        <div class="produto destaque" data-id="1">
          <div class="desconto">25% off</div>
          <img src="/images/IMG_5669.JPG" alt="Daylight Óleo" />
          <h4>Daylight Óleo</h4>
          <p class="categoria">Óleo Capilar</p>
          <p class="preco"><del>R$ 29,99</del> R$ 23,99</p>
          <button class="btn-adicionar">🛒 Carrinho</button>
        </div>

        <div class="produto" data-id="2">
          <img src="/images/mask.JPG" alt="Luminous Mask" />
          <h4>Luminous Mask</h4>
          <p class="categoria">Máscara Capilar</p>
          <p class="preco">R$ 29,99</p>
          <button class="btn-adicionar">🛒 Carrinho</button>
        </div>

        <div class="produto" data-id="3">
          <img src="/images/tonico2.JPG" alt="Tônico Fortalecimento" />
          <h4>Tônico Fortalecimento</h4>
          <p class="categoria">Tônico Capilar</p>
          <p class="preco">R$ 69,90</p>
          <button class="btn-adicionar">🛒 Carrinho</button>
        </div>

        <div class="produto" data-id="4">
          <img src="/images/Oléo Capilar.jpg" alt="Óleo Lumera Hair" />
          <h4>Óleo Lumera Hair</h4>
          <p class="categoria">Óleo Capilar</p>
          <p class="preco">R$ 50,00</p>
          <button class="btn-adicionar">🛒 Carrinho</button>
        </div>

        <div class="produto" data-id="5">
          <div class="desconto">15% off</div>
          <img src="/images/Perfume Capilar.jpg" alt="Cherie Hair" />
          <h4>Cherie Hair</h4>
          <p class="categoria">Perfume Capilar</p>
          <p class="preco"><del>R$ 59,99</del> R$ 50,99</p>
          <button class="btn-adicionar">🛒 Carrinho</button>
        </div>

        <div class="produto" data-id="6">
          <img src="/images/tonica3.JPG" alt="Tônico Mega Hair" />
          <h4>Tônico Mega Hair</h4>
          <p class="categoria">Tônico Capilar</p>
          <p class="preco">R$ 69,99</p>
          <button class="btn-adicionar">🛒 Carrinho</button>
        </div>

        <div class="produto" data-id="7">
          <img src="/images/tonica3.JPG" alt="Kit Tônico Capilar" />
          <h4>Kit Tônico Capilar</h4>
          <p class="categoria">2 Tônicos para crescimento</p>
          <p class="preco">R$ 100,00</p>
          <button class="btn-adicionar">🛒 Carrinho</button>
        </div>

        <div class="produto" data-id="8">
          <img src="/images/Lumina Blond.jpg" alt="Lumina Blond Hair" />
          <h4>Lumina Blond Hair</h4>
          <p class="categoria">Shampoo, Condicionador, Creme e Leave-in</p>
          <p class="preco">R$ 199,99</p>
          <button class="btn-adicionar">🛒 Carrinho</button>
        </div>

        <div class="produto" data-id="9">
          <img src="/images/kitlumera.JPG" alt="Lumera Hair" />
          <h4>Lumera Hair</h4>
          <p class="categoria">Shampoo, Condicionador, Creme e Leave-in</p>
          <p class="preco">R$ 150,00</p>
          <button class="btn-adicionar">🛒 Carrinho</button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="newsletter">
      <h2>Aline Dias Studio</h2>
      <p>Explore nossos produtos</p>
      <form>
        <input type="email" placeholder="Seu Email" />
        <button type="submit">Inscreva</button>
      </form>
    </div>

    <div class="rodape-links">
      <div>
        <h4>LOJA</h4>
        <p>Produtos</p>
      </div>
      <div>
        <h4>SOBRE</h4>
        <p>Sobre nós<br>Contato<br>Loja<br>Endereço</p>
      </div>
    </div>

    <div class="copyright">
      <p>TODOS OS DIREITOS RESERVADOS</p>
      <p><a href="#">Política de Privacidade</a> | <a href="#">Termo de uso</a></p>
    </div>
  </footer>

  <!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pedido Recebido</title>
  <link rel="stylesheet" href="/css/detalhesc.css" />
</head>
<body>
  <div class="container">
    <h1>Seu pedido foi recebido!</h1>
    <p class="subtitulo">Agradecemos pela compra!</p>

    <hr class="linha" />

    <div class="produtos" id="produtos-comprados"></div>

    <div class="resumo">
      <div class="precos">
        <p>Subtotal</p>
        <p class="subtotal" id="subtotal">R$ 0,00</p>
        <p>Taxa de Entrega</p>
        <p>Grátis</p>
      </div>
      <hr />
      <div class="total">
        <p><strong>Total</strong></p>
        <p><strong id="total">R$ 0,00</strong></p>
      </div>
    </div>

    <hr class="linha" />

    <div class="endereco" id="endereco-entrega">
      <p><strong>Seu pedido está sendo enviado para:</strong></p>
      <p id="endereco-texto">Carregando endereço...</p>
    </div>

    <div class="botoes">
      <button class="ver-status" onclick="window.location.href='/status'">Ver Status</button>
      <a href="/#" class="voltar-compras">Voltar às compras</a>
    </div>

    <h2>Recomendado para você</h2>

    <div class="recomendacoes">
      <div class="item-recomendado">
        <img src="/images/tonica3.JPG" alt="Tônico Mega Hair" />
        <p class="titulo">Tônico Mega Hair</p>
        <p class="descricao">Tônico Capilar</p>
        <p class="preco">R$ 69,90</p>
        <button class="btn-carrinho" onclick="adicionarAoCarrinho(1)">🛒 Carrinho</button>
      </div>
      <div class="item-recomendado">
        <img src="/images/Lumina Blond.jpg" alt="Lumina Blond Hair" />
        <p class="titulo">Lumina Blond Hair</p>
        <p class="descricao">Shampoo, Condicionador, Creme e Leave-in</p>
        <p class="preco">R$ 199,99</p>
        <button class="btn-carrinho" onclick="adicionarAoCarrinho(2)">🛒 Carrinho</button>
      </div>
      <div class="item-recomendado">
        <img src="/images/kitlumera.JPG" alt="Lumera Hair" />
        <p class="titulo">Lumera Hair</p>
        <p class="descricao">Shampoo, Condicionador, Creme e Leave-in</p>
        <p class="preco">R$ 150,00</p>
        <button class="btn-carrinho" onclick="adicionarAoCarrinho(3)">🛒 Carrinho</button>
      </div>
      <div class="item-recomendado desconto">
        <div class="etiqueta">15% off</div>
        <img src="/images/Perfume Capilar.jpg" alt="Cherrie Hair" />
        <p class="titulo">Cherrie Hair</p>
        <p class="descricao">Perfume Capilar</p>
        <p class="preco">
          <span class="preco-antigo">R$ 59,90</span> R$ 50,90
        </p>
        <button class="btn-carrinho" onclick="adicionarAoCarrinho(4)">🛒 Carrinho</button>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <div class="col">
        <h3>Aline Dias Studio</h3>
        <p>Explore nossos produtos</p>
        <input type="email" placeholder="Seu Email" />
        <button>Inscreva</button>
      </div>
      <div class="col">
        <h4>LOJA</h4>
        <ul>
          <li><a href="#">Tônico</a></li>
          <li><a href="#">Shampoo</a></li>
          <li><a href="#">Perfume</a></li>
          <li><a href="#">Creme</a></li>
          <li><a href="#">Leave-in</a></li>
        </ul>
      </div>
      <div class="col">
        <h4>ATENDIMENTO</h4>
        <ul>
          <li><a href="#">Fale Conosco</a></li>
          <li><a href="#">Política de Troca</a></li>
          <li><a href="#">Entrega</a></li>
          <li><a href="#">Formas de Pagamento</a></li>
          <li><a href="#">Contato</a></li>
        </ul>
      </div>
      <div class="col">
        <h4>REDES SOCIAIS</h4>
        <ul>
          <li><a href="#">Instagram</a></li>
          <li><a href="#">Facebook</a></li>
          <li><a href="#">Pinterest</a></li>
          <li><a href="#">TikTok</a></li>
          <li><a href="#">Whatsapp</a></li>
        </ul>
      </div>
    </div>
    <hr />
    <p class="copy">Aline Dias Studio © 2024 - Todos os direitos reservados</p>
  </footer>

  <script>
    function formatarPreco(valor) {
      return valor.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
    }

    function carregarPedido() {
      fetch("/api/pedidos/ultimo")
        .then(res => res.json())
        .then(pedido => {
          const containerProdutos = document.getElementById("produtos-comprados");
          containerProdutos.innerHTML = "";
          let subtotal = 0;

          pedido.produtos.forEach(produto => {
            subtotal += produto.preco * produto.quantidade;

            const item = document.createElement("div");
            item.classList.add("item");
            item.innerHTML = `
              <img src="${produto.imagemUrl}" alt="${produto.nome}" />
              <div>
                <strong>${produto.quantidade}x ${produto.nome}</strong>
                <p>${produto.descricao}</p>
              </div>
            `;
            containerProdutos.appendChild(item);
          });

          document.getElementById("subtotal").textContent = formatarPreco(subtotal);
          document.getElementById("total").textContent = formatarPreco(subtotal);

          const endereco = pedido.endereco;
          const enderecoTexto = `
            ${endereco.nome}<br />
            ${endereco.rua}, ${endereco.numero} - ${endereco.cidade}/${endereco.estado}<br />
            CEP: ${endereco.cep}<br />
            ${endereco.pais}
          `;
          document.getElementById("endereco-texto").innerHTML = enderecoTexto;
        })
        .catch(() => {
          document.getElementById("produtos-comprados").innerHTML = "<p>Não foi possível carregar os dados do pedido.</p>";
          document.getElementById("endereco-texto").textContent = "Erro ao carregar endereço.";
        });
    }

    function adicionarAoCarrinho(produtoId) {
      fetch("/api/carrinho/add", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ produto: { id: produtoId }, quantidade: 1 }),
      })
      .then(response => {
        if (response.ok) {
          alert("Produto adicionado ao carrinho!");
        } else {
          alert("Erro ao adicionar produto ao carrinho");
        }
      })
      .catch(() => alert("Erro ao conectar com o servidor"));
    }

    document.addEventListener("DOMContentLoaded", carregarPedido);
  </script>
</body>
</html>

</body>
</html>
